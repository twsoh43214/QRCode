<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QR Label Generator</title>

<style>
body{
  font-family: -apple-system, system-ui, Arial, sans-serif;
  margin: 20px;
}

.controls{
  margin-bottom: 20px;
}

textarea{
  width: 100%;
  height: 120px;
  font-size: 16px;
  padding: 8px;
}

button{
  font-size: 16px;
  padding: 8px 14px;
  margin-right: 6px;
}

/* ===== PRINT LAYOUT ===== */

.sheet{
  display: grid;
  grid-template-columns: 1fr 1fr; /* TWO COLUMNS */
  column-gap: 40px;
  row-gap: 40px;
}

.label{
  display: grid;
  grid-template-columns: 120px auto;
  align-items: center;
  column-gap: 20px;
}

.qr img{
  width: 120px;
  height: 120px;
  image-rendering: pixelated;
}

.text{
  font-size: 36px;      /* LARGE */
  font-weight: 800;     /* BOLD */
  white-space: nowrap;  /* NO WRAP */
}

@media print{
  body{ margin:0; }
  .controls{ display:none; }
}
</style>
</head>

<body>

<div class="controls">
  <h2>QR Bulk Label Generator</h2>

  <p>Enter one code per line:</p>

  <textarea id="bulkInput" placeholder="RTF-1
D12345678x1
CONVEYOR"></textarea>

  <br><br>

  <button onclick="generateBulk()">Generate</button>
  <button onclick="window.print()">Print</button>
  <button onclick="clearLabels()">Clear</button>
</div>

<div id="preview" class="sheet"></div>

<script>

function qrUrl(data){
  const size = 800;
  const margin = 12;
  const ecc = "Q";

  return (
    "https://api.qrserver.com/v1/create-qr-code/?" +
    "format=png" +
    "&size=" + size + "x" + size +
    "&margin=" + margin +
    "&ecc=" + ecc +
    "&data=" + encodeURIComponent(data)
  );
}

function normalize(str){
  return str.replace(/\u00A0/g," ").trim();
}

function generateBulk(){

  const input = document.getElementById("bulkInput").value;
  const lines = input.split("\n")
                     .map(l => normalize(l))
                     .filter(l => l.length > 0);

  const preview = document.getElementById("preview");
  preview.innerHTML = "";

  lines.forEach(code => {

    const label = document.createElement("div");
    label.className = "label";

    const qr = document.createElement("div");
    qr.className = "qr";

    const img = document.createElement("img");
    img.src = qrUrl(code);
    img.alt = "QR";

    qr.appendChild(img);

    const text = document.createElement("div");
    text.className = "text";
    text.textContent = code;

    label.appendChild(qr);
    label.appendChild(text);
    preview.appendChild(label);

  });
}

function clearLabels(){
  document.getElementById("preview").innerHTML = "";
  document.getElementById("bulkInput").value = "";
}

</script>

</body>
</html>
